"use strict";var interval,interval_replace,interval_ga,ww,api,ct_d=document,ct_n=navigator,ct_w=window,ct_params=[],ct_t=[],ct_s=[],ct_a=!1,xhr=[],counter_ga=0,ignore=!1,ct={init:function(t,e){ct.api=e,ct_params.id=t,ct_params._ct_id=ct.getCookie("_ct_id"),ct_params.referrer=ct.referrer(),ct_params.history=ct_d.location.href,ct_params.channel=ct.getURLVars(),ct_params.language=ct.browserLanguage(),ct_params.user_agent=ct.browserVersion1b(),ct_params._ga=ct.getCookie("_ga"),ct_params.roistat_visit=ct.getCookie("roistat_visit"),ct.validateGA()},sendData:function(){ct.request(ct.api+"api/script-api/","POST",ct_params),ct.ww?ct.hendeler(ct.ww):ct.interval_replace=setInterval((function(){ct.ww&&(clearInterval(ct.interval_replace),ct.hendeler(ct.ww))}),500)},validateGA:function(){ct_params._ga?ct.sendData():ct.interval_ga=setInterval((function(){counter_ga++,ct_params._ga=ct.getCookie("_ga"),ct_params.roistat_visit=ct.getCookie("roistat_visit"),(ct_params._ga||5==counter_ga)&&(clearInterval(ct.interval_ga),ct.sendData())}),500)},hendeler:function(t){t.error&&console.log(t.error),ct_a=t.ajax,t._ct_id&&ct.setCookie("_ct_id",t._ct_id,365),setTimeout((function(){if(t.ignore&&(ignore=t.ignore),t.remove&&setTimeout((function(){ct.removePhones(t.remove)}),100),t.telephones){console.log("CallTracking script has been started. Project ID: "+ct_params.id);for(let e in t.telephones)ct.replasePhone(t.telephones[e].phone,t.telephones[e].new_phone,t.telephones[e].code)}else console.log("CallTracking phones does not exists. Project ID: "+ct_params.id)}),t.timeout)},removePhones:function(t){for(var e in t)if("string"==typeof t[e]||t[e]instanceof String){let r=document.querySelectorAll("."+t[e]);for(let t of r)t.remove()}},referrer:function(){return ct_d.referrer},history:function(){for(var t=0;t<ct_w.history.length;t++)ct_w.history[t];return ct_w.history},browserName:function(){return ct_n.appName},browserEngine:function(){return ct_n.product},browserVersion1b:function(){return ct_n.userAgent},browserLanguage:function(){return ct_n.language},cookie:function(){return ct_d.cookie},setCookie:function(t,e,r){var n=new Date;n.setTime(n.getTime()+24*r*60*60*1e3);var a="expires="+n.toUTCString();ct_d.cookie=t+"="+e+";"+a+";path=/"},getCookie:function(t){for(var e=t+"=",r=decodeURIComponent(unescape(ct_d.cookie)).split(";"),n=0;n<r.length;n++){for(var a=r[n];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(e))return a.substring(e.length,a.length)}return""},getURLVars:function(){var t=ct_d.location.search.split("?"),e={};if(t[1])for(var r=t[1].split("&"),n=0;n<r.length;n++){var a=r[n].split("=");a[0]&&a[1]&&(e[a[0]]=a[1])}return e},replasePhone:function(t="",e,r=""){setTimeout((function(){ct.replaser(t,e,r)}),100),ct_d.addEventListener("DOMContentLoaded",(function(){ct.replaser(t,e,r)}))},replaser:function(t,e,r){if(ct_d.body){var n=ct_d.body.innerHTML.matchAll(/(\+|)(\s|){0,}(\s|-|\.|\\|\/|_|\(|\)|[0-9]{1,}|){0,}/g),a=Array.from(n);ct_s[t]=!1;for(var c=0;c<a.length;c++)if(a[c][0]){var o=a[c][0].toString(),i=o.replace(/[.?*+^$[\]\\/(){}|\-|_\s]/g,"");i.length;if(i){var s="",l="+"+i;if(o=o.trim(),l==t)ct.replace(o,e),ct_s[t]=!0;else for(var u=0;u<r.length;u++){(l="+"+(s+=r[u])+i)==t&&(ct.replace(o,e),ct_s[t]=!0)}}}ct_a&&(clearInterval(ct_t[t]),ct_s[t]||(ct_t[t]=setInterval((function(){ct.replaser(t,e,r)}),1e3)))}},replace:function(t,e){e=ct.normalize(e,t);for(var r=ct.contains(ct_d.body,t,e),n=0;n<r.length;n++)(0==ignore||!1===r[n].currentNode.parentElement.classList.contains(ignore)&&0==ct.parents(r[n].currentNode.parentElement,"."+ignore).classList.contains(ignore))&&ct.stristr(r[n].currentNode.textContent,t)&&(r[n].currentNode.textContent=r[n].currentNode.textContent.replace(t,e));var a=ct_d.getElementsByTagName("*");for(n=0;n<a.length;n++)if(a[n].attributes.length>0)for(var c=0;c<a[n].attributes.length;c++)(0==ignore||!1===a[n].attributes[c].ownerElement.classList.contains(ignore)&&0==ct.parents(a[n].attributes[c].ownerElement,"."+ignore).classList.contains(ignore))&&ct.stristr(a[n].attributes[c].textContent,t)&&(a[n].attributes[c].textContent=a[n].attributes[c].textContent.replace(t,e))},parents:function(t,e){var r=t;if("HEAD"!=r.parentNode.tagName)do{r=r.parentNode}while(!r.matches(e)&&r!==document.body);return r},stristr:function(t,e,r){var n;return-1!=(n=t.toLowerCase().indexOf(e.toLowerCase()))&&(r?t.substr(0,n):t.slice(n))},contains:function(t,e,r){for(var n={acceptNode:function(t){return t.nodeValue==e&&(t.nodeValue=t.nodeValue.replace(e,r)),t.nodeType===document.TEXT_NODE&&t.nodeValue.includes(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},a=[],c=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,n,!1);c.nextNode();)a.push(c);return a},normalize:function(t,e){let r=["$","[","\\","]",".","/","(",")","{","}","|","-","|","_"," ","+"],n=e.split("").reverse(),a=t.replace(/[.?*+^$[\]\\/(){}|\-|_\s]/g,"").split("").reverse(),c=[],o=0;for(let t=0;t<n.length;t++)a[o]&&-1==r.indexOf(n[t])?(c.push(a[o]),o++):c.push(n[t]);return c.reverse().join("")},isObject:function(t){return"[object Object]"===toString.call(t)},request:function(t,e="GET",r=[]){var n=new FormData;for(var a in r)ct.isObject(r[a])?n.append(a,JSON.stringify(r[a])):n.append(a,r[a]);ct.xhr=new XMLHttpRequest,ct.xhr.open(e,t,!0);try{if(ct.xhr.send(n),4==ct.xhr.readyState&&200==ct.xhr.status)ct.getData();else{if(1!=ct.xhr.readyState||0!=ct.xhr.status)return[];ct.getData()}}catch(t){return[]}},getData:function(){return clearInterval(ct.interval),ct.xhr.response?ct.ww=JSON.parse(ct.xhr.response):ct.interval=setInterval((function(){ct.ww=ct.getData()}),500),ct.ww}};